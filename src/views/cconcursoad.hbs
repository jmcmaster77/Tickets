<main class="lista-usuarios">

    <body class="body-listauser">
        <div class="container-fluid">
            <div class="row">
                <div class"col-lg-12">

                    <div style="overflow-x:auto">
                        <div style="position: absolute; top: px; left: 3px; width: 1500px; height: 550px;">
                            <button class="btn btn-secondary" onclick="window.location.href='/profile'">
                                Retorno
                            </button>
                            <div class="table-reponsive ">
                                <table id="cconcursoad" class="table table-striped table-sm" cellspacing="0" width="100%">
                                    <thead>
                                        <tr>
                                            <th scope="col">Id concurso</th>
                                            <th scope="col">Fecha</th>
                                            <th scope="col">Título</th>
                                            <th scope="col">Discripción</th>
                                            <th scope="col">Loteria</th>
                                            <th scope="col">Fecha</th>
                                            <th scope="col">Hora</th>
                                            <th scope="col">Cant Num</th>
                                            <th scope="col">Registrado X</th>
                                            <th scope="col">Editado X</th>
                                            <th scope="col">Acciones</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>

            $(document).ready(function () {

                var serverurl = "{{serverurl}}";
                const url = serverurl + '/cconcursoaddt'

                $('#cconcursoad').DataTable({
                    "initComplete": function (settings, json) {
                        $('#cconcursoad').show();
                    },
                    responsive: "true",
                    dom: 'Bfrtilp',
                    buttons: true,
                    buttons: [
                        {
                            extend: 'excelHtml5',
                            text: '<img src="/icons/file-earmark-excel.svg" alt="" width="20" height="20" title="file-earmark-excel">',
                            titleAttr: 'Exportar a Excel',
                            className: 'btn btn-success',

                        },
                        {
                            extend: 'pdfHtml5',
                            text: '<img src="/icons/file-earmark-pdf.svg" alt="" width="20" height="20" title="file-earmark-pdf">',
                            orientation: 'landscape',
                            pageSize: 'LEGAL',
                            titleAttr: 'Exportar a PDF',
                            className: 'btn btn-danger',

                        },
                        {
                            extend: 'print',
                            text: '<img src="/icons/printer.svg" alt="" width="20" height="20" title="printer">',
                            titleAttr: 'Imprimir',
                            className: 'btn btn-info',

                        },

                    ],
                    "columns": [{
                        "data": 'idconcurso',
                        "name": 'idconcurso',
                    },
                    {
                        data: 'creado',
                        name: 'creado',
                    },
                    {
                        data: 'titulo',
                        name: 'titulo',
                    },
                    {
                        data: 'descripcion',
                        name: 'descripcion',
                    },
                    {
                        data: 'loteria',
                        name: 'loteria',
                    },
                    {
                        data: 'fecha',
                        name: 'fecha',
                    },
                    {
                        data: 'hora',
                        name: 'hora',
                    },
                    {
                        "data": 'cnum',
                        "name": 'cnum',
                    },
                    {
                        "data": 'registradox',
                        "name": 'registradox',
                    },
                    {
                        "data": 'editadox',
                        "name": 'editadox',
                    },
                    {
                        defaultContent: "<div clase='d-grid gap-2 col-6 mx-auto'><button type='button' class='btn btn-outline-secondary btn-sm me-md-2 btnEditar'><img src='/icons/pencil-square.svg' alt='' width='20' height='20' title='pencil-square'></button></div>",

                    },
                    ],

                    "language": {
                        "emptyTable": "No hay datos para mostrar.!",
                        "lengthMenu": "Mostrar _MENU_ registros",
                        "zeroRecords": "No encontrado",
                        "info": "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
                        "inforEmpty": "Mostrando registros del 0 al 0 de un total de o registros",
                        "infoFiltered": "filtrado de un total de _MAX_ resgistros",
                        "sSearch": "Buscar:",
                        "oPaginate": {
                            "sFirst": "Primero",
                            "sLast": "Ultimo",
                            "sNext": "Siguiente",
                            "sPrevious": "Anterior",
                        },
                        "sProcessing": "Procesando...",

                    }, "ajax": {
                        "type": 'get',
                        "url": url,
                        "contentType": 'aplication/json; charset=utf-8',
                        "dataType": 'json',
                        "dataSrc": '',
                    },

                });
            });
            //EDITAR
            $(document).on('click', '.btnEditar', function () {
                
                fila = $(this).closest('tr');
                id = parseInt(fila.find('td:eq(0)').text());
                // alert('Clicked row id: ' + id);
                window.location.href = "/edconcurso/" + id
            });


        </script>
    </body>
</main>